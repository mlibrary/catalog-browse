<table class="browse-table table-subject" aria-labelledby="maincontent">
  <thead>
    <tr>
      <th>Subject</th>
      <th>Records</th>
    </tr>
  </thead>
  <tbody>
    <% list.items.each do |result| %>
      <% if result.match_notice? %>
        <tr class="match-<%= list.num_matches == 0 ? 'none' : 'notice' %>">
          <td colspan="2">
            <%= list.match_text %>
          </td>
        </tr>
      <% else %>
        <tr <% if result.exact_match? %>class="exact-match"<% end %>>
          <td>
            <dl>
              <dt class="visually-hidden">Subject:</dt>
              <dd>
                <a href="<%= result.url%>">
                  <span <% if result.exact_match? %>class="strong"<% end %>>
                    <%=result.subject%>
                  </span>
                </a>
                <% if result.heading_link? %>
                  <a href="<%= result.heading_link%>" class="vernacular pipe">View Heading Information</a>
                <% end %>
              </dd>
              <% if result.has_cross_references? %>
                <% result.cross_references.each do | cr | %>
                  <% if cr.kind == 'use' %>
                    <dt>Use instead of:</dt>
                    <dd>
                      <a href="<%= cr.url%>"><%=cr.subject%></a>
                      (<%= cr.record_text %>)
                      <% if cr.heading_link? %>
                        <a href="<%= cr.heading_link %>" class="vernacular pipe">View Heading Information</a>
                      <% end %>
                    </dd>
                  <% end %>
                  <% if cr.has_terms? %>
                    <dt>Narrower term:</dt>
                    <dd>
                      <% cr.terms.each_with_index do | term, index | %>
                        <a href="<%= term.url%>"><%=term.subject%></a>
                        (<%= term.record_text %>)<% if !cr.last_term?(index)%>, <% end %>
                      <% end %>
                    </dd>
                  <% end %>
                <% end %>
              <% end %>
            </dl>
          </td>
          <td>
            <% if result.num_matches > 0 %>
              <%= result.record_text %>
            <% end %>
          </td>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</table>
